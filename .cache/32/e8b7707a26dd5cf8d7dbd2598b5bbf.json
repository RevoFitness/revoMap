{"id":"GITV","dependencies":[{"name":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\package.json","includedInParent":true,"mtime":1750141916701},{"name":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1749531474589},{"name":"./ImageLayer.js","loc":{"line":17,"column":37,"index":678},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\ImageLayer.js"},{"name":"./VectorLayer.js","loc":{"line":18,"column":38,"index":735},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorLayer.js"},{"name":"../../events/EventType.js","loc":{"line":19,"column":22,"index":777},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\events\\EventType.js"},{"name":"../../ImageCanvas.js","loc":{"line":20,"column":24,"index":830},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\ImageCanvas.js"},{"name":"../../ImageState.js","loc":{"line":21,"column":23,"index":877},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\ImageState.js"},{"name":"../../ViewHint.js","loc":{"line":22,"column":21,"index":921},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\ViewHint.js"},{"name":"../../transform.js","loc":{"line":23,"column":39,"index":981},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\transform.js"},{"name":"../../obj.js","loc":{"line":24,"column":23,"index":1026},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\obj.js"},{"name":"../../extent.js","loc":{"line":25,"column":62,"index":1104},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\extent.js"},{"name":"../../render.js","loc":{"line":26,"column":37,"index":1160},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\canvas\\VectorImageLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\render.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _ImageLayer = _interopRequireDefault(require(\"./ImageLayer.js\"));\nvar _VectorLayer = _interopRequireDefault(require(\"./VectorLayer.js\"));\nvar _EventType = _interopRequireDefault(require(\"../../events/EventType.js\"));\nvar _ImageCanvas = _interopRequireDefault(require(\"../../ImageCanvas.js\"));\nvar _ImageState = _interopRequireDefault(require(\"../../ImageState.js\"));\nvar _ViewHint = _interopRequireDefault(require(\"../../ViewHint.js\"));\nvar _transform = require(\"../../transform.js\");\nvar _obj = require(\"../../obj.js\");\nvar _extent = require(\"../../extent.js\");\nvar _render = require(\"../../render.js\");\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nvar __extends = void 0 && (void 0).__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/**\n * @module ol/renderer/canvas/VectorImageLayer\n */\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nvar CanvasVectorImageLayerRenderer = /** @class */function (_super) {\n  __extends(CanvasVectorImageLayerRenderer, _super);\n  /**\n   * @param {import(\"../../layer/VectorImage.js\").default} layer Vector image layer.\n   */\n  function CanvasVectorImageLayerRenderer(layer) {\n    var _this = _super.call(this, layer) || this;\n    /**\n     * @private\n     * @type {import(\"./VectorLayer.js\").default}\n     */\n    _this.vectorRenderer_ = new _VectorLayer.default(layer);\n    /**\n     * @private\n     * @type {number}\n     */\n    _this.layerImageRatio_ = layer.getImageRatio();\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    _this.coordinateToVectorPixelTransform_ = (0, _transform.create)();\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    _this.renderedPixelToCoordinateTransform_ = null;\n    return _this;\n  }\n  /**\n   * Clean up.\n   */\n  CanvasVectorImageLayerRenderer.prototype.disposeInternal = function () {\n    this.vectorRenderer_.dispose();\n    _super.prototype.disposeInternal.call(this);\n  };\n  /**\n   * Asynchronous layer level hit detection.\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Promise<Array<import(\"../../Feature\").default>>} Promise that resolves with an array of features.\n   */\n  CanvasVectorImageLayerRenderer.prototype.getFeatures = function (pixel) {\n    if (this.vectorRenderer_) {\n      var vectorPixel = (0, _transform.apply)(this.coordinateToVectorPixelTransform_, (0, _transform.apply)(this.renderedPixelToCoordinateTransform_, pixel.slice()));\n      return this.vectorRenderer_.getFeatures(vectorPixel);\n    } else {\n      var promise = new Promise(function (resolve, reject) {\n        resolve([]);\n      });\n      return promise;\n    }\n  };\n  /**\n   * Perform action necessary to get the layer rendered after new fonts have loaded\n   */\n  CanvasVectorImageLayerRenderer.prototype.handleFontsChanged = function () {\n    this.vectorRenderer_.handleFontsChanged();\n  };\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   */\n  CanvasVectorImageLayerRenderer.prototype.prepareFrame = function (frameState) {\n    var pixelRatio = frameState.pixelRatio;\n    var viewState = frameState.viewState;\n    var viewResolution = viewState.resolution;\n    var hints = frameState.viewHints;\n    var vectorRenderer = this.vectorRenderer_;\n    var renderedExtent = frameState.extent;\n    if (this.layerImageRatio_ !== 1) {\n      renderedExtent = renderedExtent.slice(0);\n      (0, _extent.scaleFromCenter)(renderedExtent, this.layerImageRatio_);\n    }\n    var width = (0, _extent.getWidth)(renderedExtent) / viewResolution;\n    var height = (0, _extent.getHeight)(renderedExtent) / viewResolution;\n    if (!hints[_ViewHint.default.ANIMATING] && !hints[_ViewHint.default.INTERACTING] && !(0, _extent.isEmpty)(renderedExtent)) {\n      vectorRenderer.useContainer(null, null, 1);\n      var context = vectorRenderer.context;\n      var imageFrameState_1 = /** @type {import(\"../../PluggableMap.js\").FrameState} */(0, _obj.assign)({}, frameState, {\n        declutterItems: [],\n        extent: renderedExtent,\n        size: [width, height],\n        viewState: (/** @type {import(\"../../View.js\").State} */(0, _obj.assign)({}, frameState.viewState, {\n          rotation: 0\n        }))\n      });\n      var image_1 = new _ImageCanvas.default(renderedExtent, viewResolution, pixelRatio, context.canvas, function (callback) {\n        if (vectorRenderer.prepareFrame(imageFrameState_1) && vectorRenderer.replayGroupChanged) {\n          vectorRenderer.clipping = false;\n          vectorRenderer.renderFrame(imageFrameState_1, null);\n          (0, _render.renderDeclutterItems)(imageFrameState_1, null);\n          callback();\n        }\n      });\n      image_1.addEventListener(_EventType.default.CHANGE, function () {\n        if (image_1.getState() === _ImageState.default.LOADED) {\n          this.image_ = image_1;\n          var imageResolution = image_1.getResolution();\n          var imagePixelRatio = image_1.getPixelRatio();\n          var renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n          this.renderedResolution = renderedResolution;\n          this.coordinateToVectorPixelTransform_ = (0, _transform.compose)(this.coordinateToVectorPixelTransform_, width / 2, height / 2, 1 / renderedResolution, -1 / renderedResolution, 0, -viewState.center[0], -viewState.center[1]);\n        }\n      }.bind(this));\n      image_1.load();\n    }\n    if (this.image_) {\n      this.renderedPixelToCoordinateTransform_ = frameState.pixelToCoordinateTransform.slice();\n    }\n    return !!this.image_;\n  };\n  /**\n   */\n  CanvasVectorImageLayerRenderer.prototype.preRender = function () {};\n  /**\n   */\n  CanvasVectorImageLayerRenderer.prototype.postRender = function () {};\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../../Feature.js\").FeatureLike, import(\"../../layer/Layer.js\").default): T} callback Feature callback.\n   * @param {Array<import(\"../../Feature.js\").FeatureLike>} declutteredFeatures Decluttered features.\n   * @return {T|void} Callback result.\n   * @template T\n   */\n  CanvasVectorImageLayerRenderer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, declutteredFeatures) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, declutteredFeatures);\n    } else {\n      return _super.prototype.forEachFeatureAtCoordinate.call(this, coordinate, frameState, hitTolerance, callback, declutteredFeatures);\n    }\n  };\n  return CanvasVectorImageLayerRenderer;\n}(_ImageLayer.default);\nvar _default = exports.default = CanvasVectorImageLayerRenderer;"},"sourceMaps":null,"error":null,"hash":"f654b67451562c3e9e7aa5eaac6e078a","cacheData":{"env":{}}}