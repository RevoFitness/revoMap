{"id":"m8cI","dependencies":[{"name":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\package.json","includedInParent":true,"mtime":1750062959015},{"name":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1749531474589},{"name":"../../layer/BaseVector.js","loc":{"line":17,"column":23,"index":658},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\layer\\BaseVector.js"},{"name":"../../geom/GeometryType.js","loc":{"line":18,"column":25,"index":712},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\geom\\GeometryType.js"},{"name":"../../source/VectorEventType.js","loc":{"line":19,"column":28,"index":770},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\source\\VectorEventType.js"},{"name":"../../ViewHint.js","loc":{"line":20,"column":21,"index":826},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\ViewHint.js"},{"name":"../../webgl/Buffer.js","loc":{"line":21,"column":29,"index":876},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\webgl\\Buffer.js"},{"name":"./Layer.js","loc":{"line":22,"column":90,"index":991},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\Layer.js"},{"name":"../../webgl/RenderTarget.js","loc":{"line":23,"column":30,"index":1035},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\webgl\\RenderTarget.js"},{"name":"../../webgl.js","loc":{"line":24,"column":65,"index":1131},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\webgl.js"},{"name":"../../webgl/Helper.js","loc":{"line":25,"column":46,"index":1195},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\webgl\\Helper.js"},{"name":"../../transform.js","loc":{"line":26,"column":136,"index":1356},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\transform.js"},{"name":"../../asserts.js","loc":{"line":27,"column":23,"index":1401},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\asserts.js"},{"name":"../../extent.js","loc":{"line":28,"column":44,"index":1465},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\extent.js"},{"name":"../../worker/webgl.js","loc":{"line":29,"column":44,"index":1528},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\worker\\webgl.js"},{"name":"../../util.js","loc":{"line":30,"column":23,"index":1576},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\util.js"},{"name":"../../events.js","loc":{"line":31,"column":38,"index":1631},"parent":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js","resolved":"C:\\Users\\MathewBowyer\\Downloads\\open_layers_map-main\\node_modules\\ol\\events.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=y(require(\"../../layer/BaseVector.js\")),t=y(require(\"../../geom/GeometryType.js\")),r=y(require(\"../../source/VectorEventType.js\")),i=y(require(\"../../ViewHint.js\")),s=y(require(\"../../webgl/Buffer.js\")),n=p(require(\"./Layer.js\")),o=y(require(\"../../webgl/RenderTarget.js\")),a=require(\"../../webgl.js\"),u=require(\"../../webgl/Helper.js\"),h=require(\"../../transform.js\"),f=require(\"../../asserts.js\"),c=require(\"../../extent.js\"),d=require(\"../../worker/webgl.js\"),l=require(\"../../util.js\"),_=require(\"../../events.js\");function p(e,t){if(\"function\"==typeof WeakMap)var r=new WeakMap,i=new WeakMap;return(p=function(e,t){if(!t&&e&&e.__esModule)return e;var s,n,o={__proto__:null,default:e};if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return o;if(s=t?i:r){if(s.has(e))return s.get(e);s.set(e,o)}for(const r in e)\"default\"!==r&&{}.hasOwnProperty.call(e,r)&&((n=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(n.get||n.set)?s(o,r,n):o[r]=e[r]);return o})(e,t)}function y(e){return e&&e.__esModule?e:{default:e}}var g=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m=function(p){function y(e,t){var i=this,f=t.uniforms||{},y=(0,h.create)();f[u.DefaultUniform.PROJECTION_MATRIX]=y,(i=p.call(this,e,{uniforms:f,postProcesses:t.postProcesses})||this).sourceRevision_=-1,i.verticesBuffer_=new s.default(a.ARRAY_BUFFER,a.DYNAMIC_DRAW),i.hitVerticesBuffer_=new s.default(a.ARRAY_BUFFER,a.DYNAMIC_DRAW),i.indicesBuffer_=new s.default(a.ELEMENT_ARRAY_BUFFER,a.DYNAMIC_DRAW),i.program_=i.helper.getProgram(t.fragmentShader,t.vertexShader),i.hitDetectionEnabled_=!(!t.hitFragmentShader||!t.hitVertexShader),i.hitProgram_=i.hitDetectionEnabled_&&i.helper.getProgram(t.hitFragmentShader,t.hitVertexShader);var g=t.attributes?t.attributes.map(function(e){return{name:\"a_\"+e.name,size:1,type:u.AttributeType.FLOAT}}):[];i.attributes=[{name:\"a_position\",size:2,type:u.AttributeType.FLOAT},{name:\"a_index\",size:1,type:u.AttributeType.FLOAT}].concat(g),i.hitDetectionAttributes=[{name:\"a_position\",size:2,type:u.AttributeType.FLOAT},{name:\"a_index\",size:1,type:u.AttributeType.FLOAT},{name:\"a_hitColor\",size:4,type:u.AttributeType.FLOAT},{name:\"a_featureUid\",size:1,type:u.AttributeType.FLOAT}].concat(g),i.customAttributes=t.attributes?t.attributes:[],i.previousExtent_=(0,c.createEmpty)(),i.currentTransform_=y,i.renderTransform_=(0,h.create)(),i.invertRenderTransform_=(0,h.create)(),i.renderInstructions_=new Float32Array(0),i.hitRenderInstructions_=new Float32Array(0),i.hitRenderTarget_=i.hitDetectionEnabled_&&new o.default(i.helper),i.worker_=(0,d.create)(),i.worker_.addEventListener(\"message\",function(e){var t=e.data;if(t.type===n.WebGLWorkerMessageType.GENERATE_BUFFERS){var r=t.projectionTransform;t.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(t.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,(0,h.makeInverse)(this.invertRenderTransform_,this.renderTransform_),t.hitDetection?this.hitRenderInstructions_=new Float32Array(e.data.renderInstructions):this.renderInstructions_=new Float32Array(e.data.renderInstructions),this.getLayer().changed()}}.bind(i)),i.featureCache_={},i.featureCount_=0;var m=i.getLayer().getSource();return i.sourceListenKeys_=[(0,_.listen)(m,r.default.ADDFEATURE,i.handleSourceFeatureAdded_,i),(0,_.listen)(m,r.default.CHANGEFEATURE,i.handleSourceFeatureChanged_,i),(0,_.listen)(m,r.default.REMOVEFEATURE,i.handleSourceFeatureDelete_,i),(0,_.listen)(m,r.default.CLEAR,i.handleSourceFeatureClear_,i)],m.forEachFeature(function(e){this.featureCache_[(0,l.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}.bind(i)),i}return g(y,p),y.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[(0,l.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},y.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[(0,l.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},y.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[(0,l.getUid)(t)],this.featureCount_--},y.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},y.prototype.renderFrame=function(e){var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t),this.helper.finalizeDraw(e);var r=this.helper.getCanvas(),i=e.layerStatesArray[e.layerIndex].opacity;return i!==parseFloat(r.style.opacity)&&(r.style.opacity=String(i)),this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),r},y.prototype.prepareFrame=function(t){var r=this.getLayer(),s=r.getSource(),n=t.viewState,o=!t.viewHints[i.default.ANIMATING]&&!t.viewHints[i.default.INTERACTING],a=!(0,c.equals)(this.previousExtent_,t.extent),u=this.sourceRevision_<s.getRevision();if(u&&(this.sourceRevision_=s.getRevision()),o&&(a||u)){var f=n.projection,d=n.resolution,l=r instanceof e.default?r.getRenderBuffer():0,_=(0,c.buffer)(t.extent,l*d);s.loadFeatures(_,d,f),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),(0,h.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},y.prototype.rebuildBuffers_=function(e){var r=(0,h.create)();this.helper.makeProjectionTransform(e,r);var i,s,o=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===o||(this.renderInstructions_=new Float32Array(o)),this.hitDetectionEnabled_){var a=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===a||(this.hitRenderInstructions_=new Float32Array(a))}var u,f=[],c=[],d=0,l=0;for(var _ in this.featureCache_)if((s=(i=this.featureCache_[_]).geometry)&&s.getType()===t.default.POINT){f[0]=s.getFlatCoordinates()[0],f[1]=s.getFlatCoordinates()[1],(0,h.apply)(r,f),u=(0,n.colorEncodeId)(l+6,c),this.renderInstructions_[d++]=f[0],this.renderInstructions_[d++]=f[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=f[0],this.hitRenderInstructions_[l++]=f[1],this.hitRenderInstructions_[l++]=u[0],this.hitRenderInstructions_[l++]=u[1],this.hitRenderInstructions_[l++]=u[2],this.hitRenderInstructions_[l++]=u[3],this.hitRenderInstructions_[l++]=Number(_));for(var p=void 0,y=0;y<this.customAttributes.length;y++)p=this.customAttributes[y].callback(i.feature,i.properties),this.renderInstructions_[d++]=p,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[l++]=p)}var g={type:n.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(g.projectionTransform=r,this.worker_.postMessage(g,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var m={type:n.WebGLWorkerMessageType.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};m.projectionTransform=r,m.hitDetection=!0,this.worker_.postMessage(m,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},y.prototype.forEachFeatureAtCoordinate=function(e,t,r,i,s){if((0,f.assert)(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=(0,h.apply)(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),u=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=(0,n.colorDecodeId)(u),d=this.hitRenderInstructions_[c],l=Math.floor(d).toString(),_=this.getLayer().getSource().getFeatureByUid(l);return _?i(_,this.getLayer()):void 0}},y.prototype.renderHitDetection=function(e){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},y.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){(0,_.unlistenByKey)(e)}),this.sourceListenKeys_=null,p.prototype.disposeInternal.call(this)},y}(n.default),b=exports.default=m;"},"sourceMaps":null,"error":null,"hash":"5e2b736a16fd2cd33f16dd3279d614b8","cacheData":{"env":{}}}